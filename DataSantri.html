<div class="bg-white rounded-[40px] p-8 shadow-sm border border-gray-100 animate-fade-in">
    <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8">
        <div>
            <h2 class="text-3xl font-black text-gray-800 tracking-tight uppercase">DATABASE SANTRI</h2>
            <p class="text-gray-400 font-medium italic">Manajemen Statistik Santri As'adiyah</p>
        </div>
        <div class="flex bg-gray-100 p-1.5 rounded-2xl">
            <button onclick="switchTab('input')" id="tab-input" class="px-6 py-2 rounded-xl font-bold text-sm transition-all bg-white shadow-sm text-green-700">Input Data</button>
            <button onclick="switchTab('list')" id="tab-list" class="px-6 py-2 rounded-xl font-bold text-sm transition-all text-gray-500">Lihat Tabel</button>
        </div>
    </div>

    <div id="view-input" class="grid grid-cols-1 lg:grid-cols-2 gap-12">
        <div class="space-y-6">
            <div class="p-6 bg-green-50 rounded-[32px] border border-green-100">
                <label class="block text-[10px] font-black text-green-700 uppercase tracking-widest mb-2">Pilih Target Database</label>
                <select id="targetID" class="w-full p-4 bg-white border-none rounded-2xl shadow-sm font-bold text-gray-700 focus:ring-2 focus:ring-green-500 outline-none">
                    <option value="1HTdBcYKE1ztWtj1u_6rtC0xAmE-Mknl_4mEG6og1xPg">DATABASE PUSAT (MAIN)</option>
                    <option value="ID_SPREADSHEET_CABANG_LAIN">DATABASE CABANG TERPADU</option>
                </select>
            </div>
            
            <div class="space-y-4">
                <input type="text" id="namaLembaga" placeholder="Nama Lembaga / Cabang" class="w-full p-5 bg-gray-50 border-2 border-transparent rounded-2xl focus:border-green-500 outline-none font-bold transition-all">
                <div class="grid grid-cols-2 gap-4">
                    <div class="bg-blue-50 p-4 rounded-2xl border border-blue-100">
                        <label class="text-[10px] font-black text-blue-600 uppercase tracking-widest block mb-1">Santri Laki-Laki</label>
                        <input type="number" id="jmlL" value="0" class="w-full bg-transparent text-2xl font-black outline-none">
                    </div>
                    <div class="bg-pink-50 p-4 rounded-2xl border border-pink-100">
                        <label class="text-[10px] font-black text-pink-600 uppercase tracking-widest block mb-1">Santri Perempuan</label>
                        <input type="number" id="jmlP" value="0" class="w-full bg-transparent text-2xl font-black outline-none">
                    </div>
                </div>
            </div>

            <button onclick="kirimDataSantri()" id="btnSimpan" class="w-full bg-green-800 text-white py-5 rounded-3xl font-black text-lg shadow-xl shadow-green-900/20 hover:bg-green-700 transition-all flex items-center justify-center gap-3">
                <i class="fas fa-cloud-upload-alt"></i> SIMPAN KE CLOUD
            </button>
        </div>

        <div class="bg-gray-50 rounded-[35px] p-8 border border-dashed border-gray-200 flex flex-col items-center justify-center text-center">
            <div class="w-20 h-20 bg-white rounded-3xl flex items-center justify-center shadow-sm mb-4">
                <i class="fas fa-info-circle text-3xl text-green-600"></i>
            </div>
            <h4 class="font-black text-gray-800 uppercase tracking-tight">Petunjuk Input</h4>
            <p class="text-sm text-gray-500 mt-2 leading-relaxed">Pastikan Nama Lembaga sesuai dengan SK. Data yang masuk akan langsung memperbarui grafik di Dashboard Utama.</p>
        </div>
    </div>
</div>

<script>
    async function kirimDataSantri() {
        const btn = document.getElementById('btnSimpan');
        btn.disabled = true;
        btn.innerHTML = '<i class="fas fa-circle-notch fa-spin"></i> MEMPROSES...';

        const payload = {
            action: "simpanSantri",
            targetID: document.getElementById('targetID').value,
            thn: new Date().getFullYear(),
            nama: document.getElementById('namaLembaga').value,
            l: document.getElementById('jmlL').value,
            p: document.getElementById('jmlP').value
        };

        try {
            const response = await fetch(SCRIPT_URL, { method: 'POST', body: JSON.stringify(payload) });
            const res = await response.json();
            if(res.status === "OK") {
                alert("✅ Data Berhasil Disimpan ke Google Sheets!");
                document.getElementById('namaLembaga').value = "";
            }
        } catch (e) {
            alert("❌ Gagal Terhubung ke Google Server");
        } finally {
            btn.disabled = false;
            btn.innerHTML = '<i class="fas fa-cloud-upload-alt"></i> SIMPAN KE CLOUD';
        }
    }
</script>
